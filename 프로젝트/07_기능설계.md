# 7단계: 기능설계

## 기능 명세서

### 일반 기능

| ID | 기능명 | 상세설명 | 입력 | 출력 | 우선순위 | Pain Point |
|----|--------|---------|------|------|---------|-----------|
| F-001 | 건강 데이터 입력 | 사용자 건강 정보(신체지수, 운동, 식단 등) 입력 | 건강 데이터 폼 | 저장 완료 메시지 | MVP | PP-001 |
| F-002 | 건강 대시보드 표시 | 주요 건강 지표를 카드 형태로 요약 표시 | 건강 데이터 | 대시보드 화면 | MVP | PP-002 |
| F-003 | 건강 트렌드 차트 | 기간별 건강 변화를 그래프로 표시 | 건강 데이터, 기간 | 차트 화면 | MVP | PP-004 |
| F-004 | 일일 목표 제시 | 오늘 실천할 건강 목표를 제시 | 사용자 프로필, 건강 상태 | 목표 목록 | MVP | PP-003 |
| F-005 | 습관 실천 기록 | 건강 습관 실천 여부를 기록 | 사용자 입력 | 기록 저장 | MVP | PP-001 |
| F-006 | 실천 현황 표시 | 습관 실천 진행률을 시각화하여 표시 | 실천 기록 데이터 | 진행률 차트 | MVP | PP-004 |
| F-007 | 목표 설정 및 관리 | 건강 목표를 설정하고 달성도 추적 | 목표 설정 정보 | 목표 관리 화면 | MVP | PP-003 |
| F-008 | 건강 리포트 생성 | 건강 상태 및 개선 리포트 생성 | 건강 데이터, 기간 | 리포트 문서 | MVP 권장 | PP-004 |
| F-009 | 전후 비교 차트 | 기간별 건강 상태를 비교하여 표시 | 건강 데이터, 비교 기간 | 비교 차트 | MVP 권장 | PP-004 |
| F-010 | 알림 및 리마인더 | 건강 습관 실천을 위한 알림 발송 | 알림 설정, 시간 | 알림 메시지 | MVP 권장 | PP-004 |
| F-011 | 자동 데이터 수집 설정 | 웨어러블 기기, 앱 연동 설정 | 연동 설정 정보 | 연동 상태 | 후순위 | PP-001 |
| F-012 | 전문가 상담 연결 | 전문가 상담 서비스 연결 | 상담 요청 정보 | 상담 예약 | 후순위 | PP-006 |

### AI 기능

| ID | 기능명 | AI 유형 | 입력 데이터 | 출력 형태 | 성능 요건 | 우선순위 |
|----|--------|--------|-----------|----------|----------|---------|
| AI-001 | 건강 상태 분석 | 분류/예측 | 건강 데이터(신체지수, 운동, 식단, 수면 등) | 건강 점수, 이상 징후, 위험도 | 정확도 85% 이상 | MVP |
| AI-002 | 맞춤형 건강 정보 추천 | 추천 | 사용자 프로필, 건강 상태, 선호도 | 추천 건강 정보 목록 | 추천 정확도 80% 이상 | MVP |
| AI-003 | 추천 근거 설명 | 생성 | 추천 결과, 사용자 데이터 | 추천 이유 텍스트, 근거 하이라이트 | 설명 품질 점수 75% 이상 | MVP |
| AI-004 | 건강 개선 분석 | 예측 | 건강 데이터, 기간 | 개선 트렌드, 예측 결과 | 예측 정확도 80% 이상 | MVP 권장 |
| AI-005 | 습관 패턴 분석 | 분류 | 습관 기록 데이터 | 패턴 인식 결과, 예측 | 패턴 인식 정확도 75% 이상 | 후순위 |

## MVP 범위 정의

### MVP 필수 (Must Have)

| ID | 기능명 | 선정 사유 | 예상 개발 기간 |
|----|--------|----------|--------------|
| F-001 | 건강 데이터 입력 | 기본 기능, 모든 기능의 기반 | 1주 |
| F-002 | 건강 대시보드 표시 | 사용자 첫 화면, 핵심 가치 제공 | 1주 |
| AI-001 | 건강 상태 분석 | 핵심 AI 기능, 서비스 차별화 | 2주 |
| AI-002 | 맞춤형 건강 정보 추천 | 핵심 AI 기능, 사용자 가치 | 2주 |
| AI-003 | 추천 근거 설명 | PP-002 해결, 신뢰성 구축 | 1주 |
| F-004 | 일일 목표 제시 | PP-003 해결, 실행 가능성 | 1주 |
| F-005 | 습관 실천 기록 | 기본 기능, 데이터 수집 | 1주 |
| F-006 | 실천 현황 표시 | PP-004 해결, 동기부여 | 1주 |
| F-007 | 목표 설정 및 관리 | 목표 기반 관리 | 1주 |

**총 예상 기간: 11주**

### MVP 권장 (Should Have)

| ID | 기능명 | 선정 사유 | 의존 기능 |
|----|--------|----------|----------|
| F-003 | 건강 트렌드 차트 | PP-004 해결, 시각화 강화 | F-001, F-002 |
| F-008 | 건강 리포트 생성 | PP-004 해결, 성과 확인 | AI-001, F-001 |
| F-009 | 전후 비교 차트 | 개선 효과 시각화 | F-001, F-003 |
| F-010 | 알림 및 리마인더 | PP-004 해결, 지속성 향상 | F-004, F-005 |
| AI-004 | 건강 개선 분석 | 예측 기능 강화 | AI-001, F-001 |

### 후순위 (Could Have / Won't Have)

| ID | 기능명 | 후순위 사유 | 예정 버전 |
|----|--------|-----------|----------|
| F-011 | 자동 데이터 수집 설정 | 외부 API 연동 필요, 복잡도 높음 | v2.0 |
| F-012 | 전문가 상담 연결 | 외부 서비스 연동 필요 | v2.0 |
| AI-005 | 습관 패턴 분석 | 데이터 축적 후 구현 | v2.0 |

## 핵심 기능 워크플로우

### 워크플로우 1: 건강 상태 분석 및 추천

**기능 개요:**

| 항목 | 내용 |
|------|------|
| 기능 ID | AI-001, AI-002 |
| 기능명 | 건강 상태 분석 및 맞춤형 추천 |
| 트리거 | 사용자가 건강 데이터를 입력하거나 대시보드 접근 시 |
| 관련 Pain Point | PP-002, PP-003 |

**플로우차트:**

```
[시작: 건강 데이터 입력/대시보드 접근]
      │
      ▼
┌───────────┐
│ 데이터 수집│
│ (신체지수, │
│  운동, 식단)│
└─────┬─────┘
      │
      ▼
┌───────────┐
│ AI 분석   │
│ (건강 상태 │
│  분석 모델)│
└─────┬─────┘
      │
      ▼
  <분석 완료?>
   ┌────┴────┐
   │         │
   ▼         ▼
┌─────┐   ┌─────┐
│정상 │   │이상 │
│상태 │   │징후 │
└──┬──┘   └──┬──┘
   │         │
   └────┬────┘
        ▼
   ┌─────────┐
   │ 추천 생성│
   │ (추천 모델)│
   └─────┬───┘
         │
         ▼
    ┌─────────┐
    │ 결과 표시│
    │ (대시보드)│
    └─────────┘
         │
         ▼
    [종료]
```

**단계별 상세:**

| 단계 | 동작 | 입력 | 출력 | 분기 조건 |
|------|------|------|------|----------|
| 1 | 데이터 수집 | 사용자 입력 또는 자동 수집 | 건강 데이터 | 데이터 유무 |
| 2 | AI 분석 | 건강 데이터 | 건강 점수, 이상 징후 | 분석 성공/실패 |
| 3 | 상태 판단 | 분석 결과 | 정상/주의/위험 | 건강 점수 기준 |
| 4A | 정상 상태 처리 | 정상 결과 | 일반 추천 | 정상 상태 |
| 4B | 이상 징후 처리 | 이상 징후 | 우선순위 추천 | 이상 징후 |
| 5 | 추천 생성 | 건강 상태, 사용자 프로필 | 맞춤형 추천 목록 | 추천 성공/실패 |
| 6 | 결과 표시 | 추천 결과, 분석 결과 | 대시보드 화면 | |

### 워크플로우 2: 추천 근거 설명

**기능 개요:**

| 항목 | 내용 |
|------|------|
| 기능 ID | AI-003 |
| 기능명 | 추천 근거 설명 |
| 트리거 | 사용자가 추천 정보의 "왜 추천되었나요?" 버튼 클릭 |
| 관련 Pain Point | PP-002 |

**플로우차트:**

```
[시작: 추천 근거 확인 요청]
      │
      ▼
┌───────────┐
│ 추천 정보 │
│ 및 사용자 │
│ 데이터 로드│
└─────┬─────┘
      │
      ▼
┌───────────┐
│ 근거 생성  │
│ (XAI 모델) │
└─────┬─────┘
      │
      ▼
  <근거 생성?>
   ┌────┴────┐
   │         │
   ▼         ▼
┌─────┐   ┌─────┐
│성공 │   │실패 │
│     │   │     │
└──┬──┘   └──┬──┘
   │         │
   │         ▼
   │    ┌─────────┐
   │    │ 기본 설명│
   │    │ 제공     │
   │    └─────────┘
   │         │
   └────┬────┘
        ▼
   ┌─────────┐
   │ 근거 표시│
   │ (사용자 언어)│
   └─────────┘
        │
        ▼
    [종료]
```

## AI 기능 상세 설계

### AI-001: 건강 상태 분석

| 항목 | 내용 |
|------|------|
| 기능명 | 건강 상태 분석 |
| AI 유형 | 분류/예측 |
| 목적 | 사용자의 건강 데이터를 분석하여 건강 상태를 평가하고 이상 징후를 식별 |
| 관련 Pain Point | PP-002 |

**사용자 시나리오:**
> 사용자가 건강 데이터를 입력하면, AI가 이를 분석하여 건강 점수를 산출하고, 이상 징후가 있는 경우 경고를 표시한다.

**입력 스펙:**

| 입력 항목 | 데이터 타입 | 필수 여부 | 설명 |
|----------|-----------|----------|------|
| 신체지수 | 숫자 | Y | 키, 몸무게, BMI 등 |
| 운동 데이터 | 숫자/텍스트 | N | 운동 종류, 시간, 강도 |
| 식단 데이터 | 텍스트/숫자 | N | 식사 내용, 칼로리 |
| 수면 데이터 | 숫자 | N | 수면 시간, 수면 품질 |
| 혈압/혈당 | 숫자 | N | 만성질환 관리자용 |

**AI 처리 로직:**
1. 입력 데이터 전처리 및 정규화
2. 건강 지표별 가중치 적용
3. 이상 징후 패턴 매칭 (머신러닝 모델)
4. 건강 점수 산출 (0-100점)
5. 위험도 분류 (정상/주의/위험)

**출력 스펙:**

| 출력 항목 | 데이터 타입 | UI 표현 방식 |
|----------|-----------|-------------|
| 건강 점수 | 숫자 (0-100) | 큰 숫자 표시, 색상 코딩 |
| 건강 상태 | 텍스트 | "건강함", "주의 필요", "위험" |
| 이상 징후 목록 | 배열 | 카드 형태, 경고 아이콘 |
| 위험도 | 텍스트 | 배지 형태, 색상 구분 |

**예외 처리:**

| 예외 상황 | 처리 방안 | 사용자 메시지 |
|----------|----------|-------------|
| 입력 데이터 부족 | 기본 분석 수행, 데이터 보완 안내 | "더 정확한 분석을 위해 추가 데이터를 입력해주세요" |
| AI 처리 실패 | 기본 규칙 기반 분석 수행 | "일시적인 오류가 발생했습니다. 기본 분석 결과를 표시합니다" |
| 낮은 신뢰도 결과 | 신뢰도 표시, 재분석 권장 | "분석 신뢰도가 낮습니다. 더 많은 데이터를 입력해주세요" |

**설명가능성(XAI):**

| 제공 정보 | 표현 방식 |
|----------|----------|
| 결과 도출 근거 | 각 지표별 기여도 표시, "이 점수가 나온 이유" 섹션 |
| 신뢰도/확률 | 신뢰도 퍼센트 표시, 신뢰도 바 |
| 대안 제시 | 개선 방안 추천, "이렇게 하면 점수가 올라갑니다" |

### AI-002: 맞춤형 건강 정보 추천

| 항목 | 내용 |
|------|------|
| 기능명 | 맞춤형 건강 정보 추천 |
| AI 유형 | 추천 |
| 목적 | 사용자의 건강 상태와 프로필에 맞는 개인화된 건강 정보를 추천 |
| 관련 Pain Point | PP-003 |

**사용자 시나리오:**
> 사용자의 건강 상태를 분석한 후, AI가 개인에게 가장 적합한 건강 정보와 개선 방법을 추천한다.

**입력 스펙:**

| 입력 항목 | 데이터 타입 | 필수 여부 | 설명 |
|----------|-----------|----------|------|
| 건강 상태 분석 결과 | 객체 | Y | AI-001 결과 |
| 사용자 프로필 | 객체 | Y | 나이, 성별, 라이프스타일 |
| 선호도 데이터 | 배열 | N | 이전 추천 피드백 |
| 목표 설정 정보 | 객체 | N | 건강 목표 |

**AI 처리 로직:**
1. 건강 상태와 사용자 프로필 기반 필터링
2. 콘텐츠 유사도 계산 (협업 필터링)
3. 실행 가능성 점수 계산
4. 추천 순위 결정
5. 상위 3-5개 추천 선택

**출력 스펙:**

| 출력 항목 | 데이터 타입 | UI 표현 방식 |
|----------|-----------|-------------|
| 추천 정보 목록 | 배열 | 카드 그리드 |
| 추천 제목 | 텍스트 | 카드 제목 |
| 추천 설명 | 텍스트 | 카드 설명 |
| 실행 가능성 점수 | 숫자 (0-100) | 별점 또는 퍼센트 |
| 추천 이유 | 텍스트 | "왜 추천되었나요?" 버튼 |

**예외 처리:**

| 예외 상황 | 처리 방안 | 사용자 메시지 |
|----------|----------|-------------|
| 추천 데이터 부족 | 일반 추천 제공 | "맞춤형 추천을 위해 더 많은 정보가 필요합니다" |
| 추천 생성 실패 | 인기 추천 제공 | "일시적인 오류가 발생했습니다. 인기 추천을 표시합니다" |
| 낮은 실행 가능성 | 대안 추천 제시 | "더 쉬운 방법을 추천해드립니다" |

**설명가능성(XAI):**

| 제공 정보 | 표현 방식 |
|----------|----------|
| 결과 도출 근거 | 추천 이유 텍스트, "이 추천이 나온 이유" 섹션 |
| 신뢰도/확률 | 추천 신뢰도 표시 |
| 대안 제시 | 유사 추천 목록, "다른 추천 보기" |

## 기능-화면 매핑

| 기능 ID | 관련 화면 | 화면 내 위치 | 상호작용 방식 |
|--------|----------|-------------|-------------|
| F-002 | 건강 대시보드 | 메인 화면 전체 | 스크롤, 카드 클릭 |
| AI-001 | 건강 대시보드 | 상단 건강 점수 영역 | 자동 표시, 상세보기 클릭 |
| AI-002 | 건강 정보 알아보기 | 추천 카드 그리드 | 카드 클릭, 스와이프 |
| AI-003 | 추천 상세 화면 | 추천 근거 섹션 | "왜 추천되었나요?" 버튼 클릭 |
| F-004 | 건강 습관 실천하기 | 상단 오늘 할 일 카드 | 카드 클릭, 체크박스 |
| F-005 | 습관 기록 화면 | 입력 폼 | 폼 입력, 제출 버튼 |
| F-006 | 건강 습관 실천하기 | 실천 현황 차트 | 차트 인터랙션, 기간 선택 |
